<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Storm Player</title>
    <script src="https://requirejs.org/docs/release/2.3.6/comments/require.js"></script>
    <script src="https://testbench.web-anatomy.com/StormLibrary/dist/storm-0.10.min.js"></script>

    <script src="scripts/storm-player.js"></script>
    <link rel="stylesheet" href="styles/demo.min.css">
    <link rel="stylesheet" href="styles/storm-player.min.css">
</head>
<body>
<div class="container">
    <h1>Storm Player</h1>
</div>
<div class="container">
    <div id="player1">

    </div>

    <div class="cuepoint-btn">
        <input type="button" onclick="addCuePointNow('test');" value="Add 'test' cuepoint NOW!"/>
    </div>

</div>

<script>

    var stormLibraryConfig = {
        role : "player",
        connectionType:"direct",
        stream: {
            serverList: [
                { host: "stormdev.web-anatomy.com", application:"live", port: 443, ssl: true}
            ],
            sourceList: [
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "2160p60 (4k)"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "1440p60 (HD)"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "1080p60 (HD)"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "720p60"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "480p"}, default: true},
                { protocol: "RTMP", streamName:"test_lq", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "360p"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "240p"}, default: true},
                { protocol: "RTMP", streamName:"test_hd", host:"stormdev.web-anatomy.com", application:"live", streamInfo: {label: "144p"}, default: true},
            ],
            /*
            security: {
                type: "token",
                token: "3f7af6d8a2df9307902f62ff16f1678466",
                expires: 1551231231
            }*/
        },
        settings: {
            autoStart: true,
            restartOnError: true,
            enabledProtocols: ["MSE"],

            video: {
                scalingMode: "letterbox",   // "letterbox", "crop", "fill", "resize"
            },
            debug: {
                console: {
                    enabled: true,
                    logTypes: ["INFO","ERROR", "TRACE", "WARNING", "SUCCESS"],
                    monoColor: false
                },
            }
        },


    }

    require(['StormPlayer'], function(e){
        var stormPlayer = new StormPlayer({
            containerID: "player1",
            width: 1000,
            height: 500,

            /*
            Optional
             */
            //bigPlaybackButton: false,
            //guiHideSeconds: 3,
            /*
            title: "asd",
            subtitle: "Test subtitle",
            unmuteText: 'UNMUTE SOUND',*/
        }, stormLibraryConfig);

        window.addCuePointNow = function(title){
            var currentStreamTime = stormPlayer.getLibrary().getAbsoluteStreamTime();
            if(currentStreamTime > 0)
                stormPlayer.addCuePoint(title, stormPlayer.getLibrary().getAbsoluteStreamTime());
            else
                alert('Stream does not play');
        }
    });

</script>
</body>
</html>
